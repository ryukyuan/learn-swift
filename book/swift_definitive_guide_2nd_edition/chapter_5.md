
# 5章

## 5.1 基本的なデータ型

### 数値を表すデータ型

* 数値を表すデータ型としては、Int型、Double型、Float型の他にもTable5-1に示すような型が用意されている
* C言語とは異なり、数値演算の結果がその型で扱える最大値、最小値を超えてしまう場合には実行時エラーが発生する
* このような成約を意識する必要がなければ、Int型を利用することが推奨されている
* 扱う値が非負の整数であることが明らかである場合でも、Int型を使うべきである

### 数値型のリテラル

* プログラム中に記述できる数値リテラルの表し方には、C言語とは異なる点がいくつかある

### 数値型のメソッドやプロパティ

* Swiftには暗黙の型変換はないので、異なる型同士の演算、メソッドの引数として値を渡したりする場合、イニシャライザを使って明示的に型変換をする

```
Int.init()
Int.init(_: Double)
Int.init(_: Float)
```

* Double型の値をInt型に変換

```
var k = Int(w) // 小数点以下を四捨五入した場合はInt(w + 0.5)
```

* Swiftは、クラスだけではなく、Int型などの既存の型の型にも新たなイニシャライザをやメソッドを定義できる
* 既存の演算子の定義をオーバーロードして、通常は許されていない型同士での演算を定義することもできる

### 範囲型と区間型

* for-in文の説明で触れた範囲演算子（range operator）について
* Swftには値と値の間を表す構造体があり、範囲演算子を使ってそのインスタンスを作ることができる

```
var inth: HalfOpenInterval<Int> = 0..<10 // 10は含まない
var Intc: ClosedInterval<Int> = 0...10 // 10を含む
var rg: Range<Int> = 0..<10
```

* イニシャライザを使って同様の初期化ができる

```
var inth: HalfOpenInterval<Int>(0, 10)
var Intc: ClosedInterval<Int>(0, 10)
var rg: Range<Int>(start:0, end:10)
```

* あるインスタンスが区間、範囲に含まれるかどうかという条件は、「~=」という演算子で調べることができる

```
var sintv = "archer" ... "saber" // 文字列型の区間
if sintv ~= "lancer" { print("yes") }  // true: "yes"を印字
var rg: Range<Int> = -5...5 // 整数型の範囲
if rg ~= 9 { print("yes") } /// false: 印字しない
```

* 範囲型のインスタンスはfor-in文で使えるが、区間型は使うことができない
* 範囲型は含まれるインスタンスを１つずつ取り出すことができますが、区間型はそこに含まれるインスタンスを表していないため

## 5.5 集合

### 集合の型宣言と初期値

* 集合（set）はコレクションの一種で、同一の要素を重複して格納できない、要素の順序には意味が無い

* 文字列を要素とする集合の型宣言

```
var s: Set<String>
```

* 集合型には配列リテラルを初期値として代入できる

```
var s: Set<String> = ["フランダース", "フランドル", "フランシスカ"]
```

* イニシャライザを明示的に使うこともできる

```
var e = Set<Int>()
```

* 引数に、配列や範囲などを指定できる

```
var t = Set<Int(0..<8)
```

### 要素へのアクセス

* 集合は配列と同様に含まれる要素の数を調べたり、for-in文で要素を取り出したりできる

```
var t = Set<Int>(0..<8) // SequenceType型を引数に指定できる
for i in t {
      print(i, terminator:" ")
}
print("")     // たとえば、"2 4 5 6 7 0 1 3" と出力される
```

### 集合のメソッド

* 引数を含んでいるか調べる

```
func Contains(_: T) -> Bool
```

* 引数を要素に加える

```
mutating func insert(_: T)
```

* 引数が要素に含まれているなら、集合から削除して返す

```
mutating func remove(_: T) -> T?
```

* 最初の要素を削除する

```
mutating func removeFirst() -> T
```

* 自身の集合が引数の部分集合かどうか調べる

```
func isSubsetOf<S>(_: S) -> Bool
```

* 自身の集合と引数の要素を両方とも含む新しい集合（和集合）を作って返す

```
func union<S>(_: S) -> Set<T>
```

* 和集合と同様に、差集合、積集合、対象差集合（排他的な和集合）を得るためのメソッドがある
